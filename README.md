# 智能记账应用

一个功能完整的智能记账应用，支持多种输入方式和数据管理。

## 功能特性

### 🎯 核心功能
- **多方式记账**: 语音、扫码、手动输入、拍照四种方式
- **数据统计**: 实时收支统计和图表分析
- **分类管理**: 智能分类和预算跟踪
- **数据导出**: 支持JSON格式数据导出

### 🎤 语音记账
- 使用Web Speech API实现语音转文字
- 智能识别金额和分类
- 支持中英文语音输入

### 📱 扫码记账
- 集成二维码扫描功能
- 快速识别商品信息
- 自动填充交易数据

### 📷 拍照记账
- 图像识别技术解析小票
- 自动提取金额和商户信息
- 支持多种图片格式

### 💾 数据管理
- 本地存储和MongoDB双模式
- 数据备份和恢复
- 跨设备同步支持

## 快速开始

### 环境要求
- Node.js 14+
- 现代浏览器（支持Web Speech API）
- 可选: MongoDB（用于生产环境）

### 安装运行

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd Accounting_app
   ```

2. **启动开发服务器**
   ```bash
   # 使用Python（推荐）
   python -m http.server 8000
   
   # 或使用Node.js
   npx http-server -p 8000
   ```

3. **访问应用**
   打开浏览器访问 `http://localhost:8000`

### 数据库配置

应用支持两种数据库模式：

#### 本地存储模式（默认）
- 无需额外配置
- 数据保存在浏览器中
- 适合个人使用

#### Supabase模式（推荐用于生产环境）
- 云端数据库，支持多设备同步
- 自动备份和恢复
- 完整的用户认证系统

详细配置请参考 [SUPABASE_SETUP.md](SUPABASE_SETUP.md)

## 项目结构

```
Accounting_app/
├── src/                    # 前端源码
│   ├── js/                 # JavaScript模块
│   │   ├── app.js          # 应用核心类
│   │   ├── voice-recognition.js  # 语音识别
│   │   ├── qr-scanner.js   # 二维码扫描
│   │   ├── photo-recognition.js   # 照片识别
│   │   ├── input-manager.js       # 输入管理器
│   │   └── init.js         # 应用初始化
│   ├── styles/             # 样式文件
│   └── pages/              # 页面组件
├── server/                 # 后端服务
│   ├── config/            # 配置文件
│   ├── models/            # 数据模型
│   └── scripts/           # 数据库脚本
├── index.html             # 主页面
└── test.html             # 功能测试页面
```

## 使用指南

### 语音记账
1. 点击"语音记账"按钮
2. 允许浏览器使用麦克风
3. 说出记账内容，如："今天买咖啡花了30元"
4. 系统自动识别并保存

### 扫码记账
1. 点击"扫码记账"按钮
2. 允许摄像头访问
3. 扫描商品二维码
4. 自动填充交易信息

### 拍照记账
1. 点击"拍照记账"按钮
2. 拍摄小票或账单照片
3. 系统识别关键信息
4. 确认并保存交易

### 手动输入
1. 点击"手动输入"按钮
2. 填写交易详细信息
3. 选择分类和类型
4. 保存记录

## 开发指南

### 添加新的输入方式
1. 在 `src/js/` 创建新的识别模块
2. 实现标准接口方法
3. 在 `input-manager.js` 中注册
4. 更新界面和样式

### 自定义分类
修改 `src/js/app.js` 中的分类配置：

```javascript
this.categories = [
    { id: 'food', name: '餐饮', color: '#ff6b6b', icon: '🍽️' },
    // 添加更多分类...
];
```

### 数据模型
应用使用统一的数据模型：

```javascript
{
    id: '唯一标识',
    type: 'income|expense',    // 收入或支出
    amount: 100,              // 金额
    category: 'food',         // 分类ID
    description: '交易描述',
    merchant: '商户名称',
    date: '2023-01-01',       // 日期
    time: '12:00'            // 时间
}
```

## 浏览器兼容性

- ✅ Chrome 60+（推荐）
- ✅ Firefox 55+
- ✅ Safari 11+
- ✅ Edge 79+

### 功能支持情况
| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| 语音识别 | ✅ | ✅ | ✅ | ✅ |
| 摄像头 | ✅ | ✅ | ✅ | ✅ |
| 文件上传 | ✅ | ✅ | ✅ | ✅ |
| 本地存储 | ✅ | ✅ | ✅ | ✅ |

## 故障排除

### 常见问题

1. **语音识别不工作**
   - 检查麦克风权限
   - 确保使用HTTPS或localhost

2. **摄像头无法访问**
   - 允许网站使用摄像头
   - 检查浏览器权限设置

3. **数据丢失**
   - 检查浏览器localStorage是否被清除
   - 定期导出数据备份

### 获取帮助
- 查看控制台错误信息
- 参考 `DATABASE_SETUP.md` 数据库配置
- 使用 `test.html` 进行功能测试

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

MIT License